openapi: 3.0.3
info:
  title: Builder API
  version: 1.0.0
  description: API documentation for the Builder backend (accounts, items, item categories, maps).
servers:
  - url: http://localhost:5001

components:
  schemas:
    SignupRequest:
      type: object
      required: [email, password]
      properties:
        email:
          type: string
          format: email
        password:
          type: string
    SigninRequest:
      type: object
      required: [email, password]
      properties:
        email:
          type: string
          format: email
        password:
          type: string
    AccountResponse:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
    Item:
      type: object
      properties:
        id:
          type: string
        category:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
        name:
          type: string
        description:
          type: string
        price:
          type: number
          format: float
        sizeX:
          type: integer
        sizeY:
          type: integer
        imageUrl:
          type: string
        isActive:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ItemCategory:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        isActive:
          type: boolean
        createdAt:
          type: string
          format: date-time

paths:
  /api/account/signup:
    post:
      summary: Create a new account
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SignupRequest"
      responses:
        "201":
          description: Account created
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  account:
                    $ref: "#/components/schemas/AccountResponse"
        "400":
          description: Validation error

  /api/account/signin:
    post:
      summary: Sign in and receive tokens
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SigninRequest"
      responses:
        "200":
          description: Signed in
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  account:
                    $ref: "#/components/schemas/AccountResponse"
                  tokens:
                    type: object
                    properties:
                      access:
                        type: string
                      refresh:
                        type: string

  /api/items:
    get:
      summary: List active items (shop)
      parameters:
        - in: query
          name: page
          schema:
            type: integer
        - in: query
          name: limit
          schema:
            type: integer
      responses:
        "200":
          description: Paginated items
          content:
            application/json:
              schema:
                type: object
                properties:
                  page:
                    type: integer
                  limit:
                    type: integer
                  items:
                    type: array
                    items:
                      $ref: "#/components/schemas/Item"
    post:
      summary: Create an item
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                category:
                  type: string
                name:
                  type: string
                description:
                  type: string
                price:
                  type: number
                sizeX:
                  type: integer
                sizeY:
                  type: integer
                imageUrl:
                  type: string
      responses:
        "201":
          description: Created item
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Item"

  /api/items/{id}:
    get:
      summary: Get item by id
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Item
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Item"
        "404":
          description: Not found
    put:
      summary: Update item
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
      responses:
        "200":
          description: Updated item
    delete:
      summary: Soft-delete item (sets isActive=false)
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Soft deleted

  /api/item-categories:
    get:
      summary: List item categories
      parameters:
        - in: query
          name: page
          schema:
            type: integer
        - in: query
          name: limit
          schema:
            type: integer
      responses:
        "200":
          description: Paginated categories
    post:
      summary: Create a category
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name]
              properties:
                name:
                  type: string
                description:
                  type: string
      responses:
        "201":
          description: Created

  /api/item-categories/{id}:
    get:
      summary: Get category by id
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Category
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ItemCategory"
        "404":
          description: Not found
    put:
      summary: Update category
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
      responses:
        "200":
          description: Updated
    delete:
      summary: Soft-delete category (isActive=false)
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Soft deleted

tags:
  - name: account
  - name: items
  - name: categories
